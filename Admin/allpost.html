<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>admin.</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="newstyle.css">
</head>

<body>
    <div class="container">
        <div class="nav">
            <h5><a href="admincss.html">HOME</a></h5>
            <ul>
                <li class="head">Blog</li>
                <li><a href="allpost.html" class="active"><i class="fa fa-file awesome"></i>All Post</a></li>
                <li><a href="adminblog.html"><i class="fa fa-hourglass awesome"></i>Add New Post</a></li>

            </ul>

            <ul>
                <li class="head">Event</li>
                <li><a href="eventpost.html"><i class="fa fa-plus awesome"></i>Add New Event</a></li>
                <li><a href="allevent.html"><i class="fa fa-calendar awesome"></i>All Event</a></li>

            </ul>

            <ul>
                <li class="head">Forum</li>
                <li><a href=""><i class="fa fa-plus awesome"></i>Add New Topic</a></li>
                <li><a href=""><i class="fa fa-folder awesome"></i>All Topics</a></li>

            </ul>
            <ul>
                <li class="head">Settings</li>
                <li><a href="settings.html"><i class="fa fa-cog awesome"></i>Update Settings</a></li>
                <li><a href="#" onclick="logOut()"><i class="fa fa-sign-out awesome"></i>Log Out</a></li>

            </ul>
        </div>
        <div class="cont">
            <div class="top_head">
                <input type="text" placeholder="search" class="topsearchbtn" style="float: left;">
                <i class="fa fa-user fa-2x" style="float: right; margin: 10px; color: white;"></i>
            </div>
            <div class="eventt">
                <table id="allpost">

                    <thead style="color: white;">
                        <tr>
                            <th>S/N</th>
                            <th> Image</th>
                            <th>Content</th>

                        </tr>
                    </thead>
                    <tbody id="allarticles">


                        <!--     <tr>
                            <td>01</td>
                            <td><img src="./image/img.jpg" alt="image" class="trendimage"></td>
                            <td>
                                Lorem ipsum dolor sit amet, consectetur adipisicing <br> elit. Sapiente ipsam
                                aperiam
                                necessitatibus
                                <br> Jan, 13 2020
                            </td>
                            <td><i class="fa fa-eye"><span style="margin-left: 10px;">6.5K</span></i></td>
                            <td><i class="fa fa-thumbs-up"><span style="margin-left: 10px;">6.5K</span></i></td>
                            <td><a href=""><i class="fa fa-update"><span style="margin-left: 10px;">Update
                                            Post</span></i><a href=""></a></td>
                            <td><a href=""><i class="fa fa-delete"><span style="margin-left: 10px;">Delete Post
                                        </span></i></a></td>


                        </tr>
                      -->



                    </tbody>

                </table>
            </div>
        </div>



    </div>
</body>

<script>

    blogp();
    function blogp() {
        fetch("https://imesiapi.everythingpropagule.com/blog/blog_posts").then(
            (res) => {
                res.json().then((data) => {
                    console.log(data);

                    if (data.length > 0) {
                        var blogp = "";
                        let count = 0;
                        // let newcount = 1;
                        data.forEach((itemData) => {
                            if (count < 6) {
                                blogp += "<tr>"
                                blogp += "<td id ='postid'>" + count + "</td>"
                                blogp += "<td><img  class='trendimage' id ='postimage' src ='https://" + data[count]["banner"] + "'></td>"
                                blogp += "<td id ='postcontent'><a href ='adminblog.html?post_id=" + data[count]["id"] + "'>" + data[count]["content"].substring(0, 200) + "</a></td>"
                                blogp += "<td><a href ='updateblog.html?post_id=" + data[count]["id"] + "'> Update Post  </a></td>"
                                blogp += "<td><a href ='' onclick= 'deletepost();'>Delete Post </a></td>"
                                blogp += "</tr>"
                            }
                            //   newcount++
                            count++
                        });

                    }
                    document.getElementById("allarticles").innerHTML = blogp;

                });
            }
        );
    }
    

    function deletepost(){
        
        //id = document.getElementById('id').innerHTML;
        content = document.getElementById('postcontent').innerHTML;
        banner = document.getElementById ('postimage').src;

        const blog = {
           //"id": id,
            "postimage": banner,
            "postcontent": content
        }
      
        if (confirm('Are you sure you want to delete?')) {
            alert(blog)
            //row = td.parentElement.parentElement;
           // (itemid, JSON.stringify(blog));
            document.getElementById("allarticles").remove(blog);

            // document.getElementById("allarticles").deleteRow(row.rowIndex);
            //resetForm();
        }
    }


    /*   function resetForm() {
          document.getElementById("postimage").value = "";
          document.getElementById("postid").value = "";
          document.getElementById("postcontent").value = "";
          selectedRow = null;
      }
  
      function onEdit(td) {
          selectedRow = td.parentElement.parentElement;
          document.getElementById("fname").value = selectedRow.cells[0].innerHTML;
          document.getElementById("emp").value = selectedRow.cells[1].innerHTML;
          document.getElementById("salary").value = selectedRow.cells[2].innerHTML;
          document.getElementById("city").value = selectedRow.cells[3].innerHTML;
      }
  
  
      function updateForm(formData) {
          selectedRow.cells[0].innerHTML = formData.fname;
          selectedRow.cells[1].innerHTML = formData.emp;
          selectedRow.cells[2].innerHTML = formData.salary;
          selectedRow.cells[3].innerHTML = formData.city;
      }
  
   */





    function logOut() {
        swal({
            title: "Are You Sure You Want To Log Out?",
            // text: "Once deleted, you will not be able to recover this imaginary file!",
            icon: "warning",
            buttons: true,
            dangerMode: false,
        })
            .then((willDelete) => {
                if (willDelete) {
                    location.href = "admincss.html"
                    /*   swal("Poof! Your imaginary file has been deleted!", {
                          icon: "success",
                      }); */
                }
            });
    }
</script>

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>


</html>