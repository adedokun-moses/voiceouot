<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>voiceout.com</title>
    <link rel="stylesheet" href="bootstrp4/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="./css/grey.css">
</head>

<body>
    <nav class="navbar navbar-expand-sm bg-dark fixed-top">

        <ul class="navbar-nav ">
            <li class="nav-item  ">
                <a href="index.html" class=" navbar-brand    ">Voiceout</a>

            </li>
        </ul>

        <!-- Toggler/collapsibe Button -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
            <span><i class="fa fa-bars" style="background-color: white;"></i></span>
        </button>

        <div class="collapse navbar-collapse" id="collapsibleNavbar">
            <ul class="navbar-nav ">
                <li class="nav-item  ">
                    <a href="#./Admin/signup.html" class="btn text-white btn-warning ">Join The Forum: Sign Up Here</a>

                </li>
            </ul>

            <ul class="navbar-nav mx-auto">
                <li class="nav-item ">
                    <a href="index.html" class="nav-link text-white">Home</a>
                </li>
                <li class="nav-item ">
                    <a href="about.html" class="nav-link text-white">About Us </a>
                </li>

            </ul>


            <ul class="navbar-nav ">
                <li class="nav-item  ">
                    <a onclick="job()" class="btn text-white btn-success ">Add NEWS</a>

                </li>
            </ul>
        </div>




    </nav>

    <div class="container">
        <div class="row">
            <div class="col-sm-12 headline text-center pt-5">
                <a href="index.html" style="font-size: 80px; font-style: italic;">Voiceout</a>
                <p>Express Your Opinion Without Fear</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12 mx-auto mt-5   ">
                <div class="row">
                    <div class="col-sm-8">
                        <img src="" id="image" style="width: 100%;">
                        <h5 id="author"></h5>
                        <h5 id="title"></h5>
                    </div>
                    <div class="col-sm-4">
                        <h5>Latest Comment </h5>
                        <div class="recent_comment">
                            <div class="image_tab" style="flex-basis: 30%;">
                                <img src="" id="author_image" alt="">
                                <h5 id="name" style="font-size: 12px; text-align: center;"></h5>
                            </div>
                            <div class="comment ml-3" style="flex-basis: 60%;">
                                <h5 id="autho_comment"></h5>
                            </div>

                            <button class="btn btn-danger"  onclick="event.preventDefault(); deleteComment()">Delete</button>


                        </div>
                    </div>
                </div>



            </div>


        </div>

        <div class="row">
            <div class="col-sm-12 mx-auto mt-5">
                <div class="row">
                    <div class="col-sm-8 ">
                        <h5>LEAVE A REPLY</h5>
                        <form>
                            <textarea cols="30" rows="10" class="form-control" placeholder="Your Opinion"
                                id="text_content"></textarea>
                            <input type="text" placeholder="Name:" class="form-control mt-3" id="author_name">
                            <button class="btn btn-success mt-2"
                                onclick="event.preventDefault(); addComment()">Comment</button>
                        </form>
                    </div>
                </div>


            </div>
        </div>

    </div>


    <footer>

        <div class="container-fluid ">
            <div class="row">
                <div class="col-sm-10 mx-auto mt-5">
                    <div class="row">
                        <div class="col-sm-6 footer1">
                            <h5>Get To Know Us <br>#VOICEOUT</h5>
                            <p>
                                <a href="index.html">Voiceout.com</a> is an outstanding platform that encourages
                                citizens of any
                                nation to
                                express themselves without any fear of intimidation. Using photos,
                                text, and video dynamically, the site informs and prompts citizens of the latest news as
                                they occur. Users are also allowed to share their opinions.
                            </p>
                        </div>

                        <div class="col-sm-6 footer2">

                            <h5>Connect With Us</h5>
                            <ul>
                                <li><a href="https://github.com/adedokun-moses/voiceout/tree/master"><i
                                            class="fa fa-github"></i> Check Code On github</a></li>
                                <li><a href="https://www.linkedin.com/in/adedokun-moses-703aa1209"><i
                                            class="fa fa-twitter"></i> Connect With Us On Twitter</a> </li>
                                <li> <a href="https://www.facebook.com/adedokunmoses1"><i class="fa fa-facebook"></i>
                                        Connect With Us On Facebook</a></li>
                                <li><a href="https://www.linkedin.com/in/adedokun-moses-703aa1209"><i
                                            class="fa fa-linkedin"></i> Connect With Us On Linkdin</a></li>
                                <li> <a href="https://www.linkedin.com/in/adedokun-moses-703aa1209"><i
                                            class="fa fa-instagram"></i> Connect With Us On Instagram</a></li>
                            </ul>
                        </div>
                        <div class="col-sm-6  footer3">
                            <h5>Copyright ©2022 All Rights Reserved Worldwide Voiceout</h5>
                        </div>
                        <div class="col-sm-6  footer3">
                            <h5>Everyone deserve to be geard withoutany form of discrimination </h5>

                        </div>
                    </div>

                </div>
            </div>
        </div>

    </footer>


    <!--     <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">
            Open modal
        </button> -->

    <!-- The Modal -->
    <div class="modal" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header">
                    <!-- <h4 class="modal-title"></h4> -->
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!-- Modal body -->
                <div class="modal-body">

                    <iframe
                        src="https://docs.google.com/forms/d/e/1FAIpQLSfSacDpJjRbMJSJLkmEsBYqge3lBPcUUcyNhFkz6_MRUbTcHQ/viewform?embedded=true"
                        class="form" frameborder="0" marginheight="0" marginwidth="0">Loading…</iframe>

                </div>

                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>

</body>

<style>
    .image_tab {
        height: 100px;
        width: 30%;
        background: yellow;
    }

    .image_tab img {
        width: 100%;
    }

    .recent_comment {
        display: flex;
        align-items: center;
    }
</style>




<script>


    var url_string = window.location;
    var url = new URL(url_string)
    var id = url.searchParams.get("id");

    blogPostall();
    function blogPostall() {
        fetch('https://61924d4daeab5c0017105f1a.mockapi.io/credo/v1/news/' + id,).then(
            (res) => {

                res.json().then((data) => {
                    // console.log(data);
                    document.getElementById('title').innerHTML = (data.title);
                    document.getElementById('author').innerHTML = (data.author);
                    document.getElementById('image').src = (data.avatar);


                });

            });
    }

    commentPOST();
    function commentPOST() {
        fetch('https://61924d4daeab5c0017105f1a.mockapi.io/credo/v1/news/' + id + '/comments',).then(
            (res) => {
                res.json().then((data) => {
                    console.log(data);
                    document.getElementById('name').innerHTML = (data[0].name);
                    document.getElementById('autho_comment').innerHTML = (data[0].comment);
                    document.getElementById('author_image').src = (data[0].avatar);


                });

            });
    }


    function addComment() {
        let author_body = document.getElementById('text_content').value
        let author = document.getElementById('author_name').value
      //  let id = id
        // alert('home')
        fetch('https://61924d4daeab5c0017105f1a.mockapi.io/credo/v1/news/' + id + '/comments', {
            method: 'POST',
            headers: {
                'Accept': 'application/json',
            },
            body: JSON.stringify({
                name: author,
                body: author_body,
                id: id

            }),
        })
            .then(function (response) {
                return response.json()
            })
            .then(function (data) {
                console.log(data)
                title = document.getElementById("name")
                body = document.getElementById("autho_comment")
                title.innerHTML = data.title
                body.innerHTML = data.body
            }).catch(error => console.error('Error:', error));

            /* .then(response => response.text())
            .then(text => console.log(text))
            .catch(error => console.error('Error:', error)); */

    }

    function deleteComment() {
        fetch('https://61924d4daeab5c0017105f1a.mockapi.io/credo/v1/news/' + id + '/comments', {
            method: 'DELETE',
            headers: {
                'Accept': 'application/json',
            },
         /*    body: JSON.stringify({
                name: author,
                body: author_body,

            }), */
        })
            .then(function (response) {
                return response.json()
            }).catch(error => console.error('Error:', error));

    }








</script>




<script src="bootstrp4/jquery.min.js"></script>
<script src="bootstrp4/bootstrap.min.js"></script>
<script src="bootstrp4/popper.min.js"></script>
<script src="blognews.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="internet.js"></script>

</html>